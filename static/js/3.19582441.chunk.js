(this["webpackJsonppizza-loft-product"]=this["webpackJsonppizza-loft-product"]||[]).push([[3],{86:function(e,t,n){},87:function(e,t,n){},88:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(14),l=n(3),u=n(18),i=n(7),o=(n(86),Object(c.b)((function(e){return{error:e.admin.error,isLoad:e.admin.isLoad}}),(function(e){return{signIn:function(t){return e(Object(i.t)(t.email,t.password))}}}))((function(e){var t=e.signIn,n=e.error,c=e.isLoad,i={email:"",password:""},o=Object(a.useState)(i),s=Object(u.a)(o,2),m=s[0],d=s[1],p={input:function(e){var t=Object(l.a)({},m);t[e.target.name]=e.target.value,d(t)},submit:function(e){e.preventDefault(),t(Object(l.a)({},m)),d(i)}};return r.a.createElement("div",{className:"LogIn"},r.a.createElement("form",{onSubmit:p.submit,className:"LogIn__form"},r.a.createElement("label",{htmlFor:"login"},r.a.createElement("span",null,"E-mail:"),r.a.createElement("input",{id:"login",className:n.includes("There is no user")?"error":"",type:"email",name:"email",placeholder:n.includes("There is no user")?"Niepoprawny e-mail":"",onChange:p.input,value:m.email,required:!0})),r.a.createElement("label",{htmlFor:"password"},r.a.createElement("span",null,"Password:"),r.a.createElement("input",{id:"password",type:"password",className:n.includes("password")?"error":"",placeholder:n.includes("password")?"Niepoprawne has\u0142o":"",name:"password",onChange:p.input,value:m.password,required:!0})),r.a.createElement("button",{disabled:!c,className:"LogIn__form-button"},"Zaloguj")))}))),s=n(25),m=n(17),d=n(5),p=function(){var e=Object(m.f)().url;return r.a.createElement("aside",{className:"admin-panel__navigation"},r.a.createElement("nav",null,r.a.createElement("ul",{className:"admin-panel__navigation-list"},r.a.createElement("li",null,r.a.createElement(d.c,{className:"admin-panel__navigation-link",to:"".concat(e,"/pizza-menu")},r.a.createElement(s.f,null))),r.a.createElement("li",null,r.a.createElement(d.c,{className:"admin-panel__navigation-link",to:"".concat(e,"/bar-menu")},r.a.createElement(s.a,null))),r.a.createElement("li",null,r.a.createElement(d.c,{className:"admin-panel__navigation-link",to:"".concat(e,"/page-info")},r.a.createElement(s.e,null))))))},h=(n(87),n(9)),f=n.n(h),b=n(22),g=n(33),E=n(35),v=n(34),j=n(36),k=n(29),O=function(e){var t=e.name,n=e.ing,c=e.enable,i=e.price,o=e.id,m=e.handleFormSubmit,d=e.handleDeletElement,p=Object(a.useState)({status:{isSaved:!0},product:{enable:c,id:o,ing:n,name:t,price:i}}),h=Object(u.a)(p,2),f=h[0],b=h[1],g=function(e){var t=Object(l.a)({},f);t.status.isSaved=!1,"checkbox"===e.target.type?t.product[e.target.name]=!t.product[e.target.name]:"number"===e.target.type?t.product[e.target.name]=+e.target.value:t.product[e.target.name]=e.target.value,b(t)};return r.a.createElement("form",{className:"admin-menu__item",onSubmit:function(e){var t=Object(l.a)({},f);t.status.isSaved=!0,b(t),m(f.product,e)}},r.a.createElement("input",{onChange:g,name:"name",type:"text",value:f.product.name}),r.a.createElement("input",{type:"text",onChange:g,name:"ing",value:f.product.ing}),r.a.createElement("label",{className:"enable",htmlFor:f.product.id},f.product.enable?r.a.createElement(k.c,null):r.a.createElement(k.d,null)),r.a.createElement("input",{id:f.product.id,onChange:g,name:"enable",type:"checkbox",checked:f.product.enable}),r.a.createElement("input",{onChange:g,name:"price",type:"number",value:f.product.price}),r.a.createElement("button",{disabled:f.status.isSaved,className:"admin-menu__button admin-menu__button--add"},"Aktualizuj"),r.a.createElement("a",{href:"/",className:"admin-menu__button",onClick:d.bind(null,f.product.id)},r.a.createElement(s.h,null)),r.a.createElement("span",{className:"admin-menu__isUpload"},f.status.isSaved?r.a.createElement(s.i,{color:"green"}):r.a.createElement(s.g,{color:"red"})))},z=function(e){var t=e.handleAddNewItem,n={product:{name:"",ing:"",enable:!0,price:""}},c=Object(a.useState)(n),i=Object(u.a)(c,2),o=i[0],s=i[1],m=Object(a.useRef)(null),d=function(e){var t=Object(l.a)({},o);"checkbox"===e.target.type?t.product[e.target.name]=!t.product[e.target.name]:"number"===e.target.type?t.product[e.target.name]=1*e.target.value:t.product[e.target.name]=e.target.value,s(t)},p=Math.random();return r.a.createElement("form",{className:"admin-menu__item",onSubmit:function(e){t(o.product,e),s(n),m.current.focus()}},r.a.createElement("input",{onChange:d,name:"name",type:"text",value:o.product.name,ref:m,placeholder:"Nazwa",required:!0}),r.a.createElement("input",{type:"text",onChange:d,name:"ing",placeholder:"Sk\u0142adniki",value:o.product.ing}),r.a.createElement("label",{className:"enable",htmlFor:p},o.product.enable?r.a.createElement(k.c,null):r.a.createElement(k.d,null)),r.a.createElement("input",{onChange:d,id:p,name:"enable",type:"checkbox",checked:o.product.enable}),r.a.createElement("input",{onChange:d,name:"price",type:"number",placeholder:"Cena",value:o.product.price,required:!0}),r.a.createElement("button",{className:"admin-menu__button admin-menu__button--add"},"Dodaj"),r.a.createElement("div",null),r.a.createElement("div",null))},S=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={},n.handleTouched=function(){n.setState({isChanged:!0})},n.handleFormSubmit=function(e,t,a){a.preventDefault(),n.setState((function(n){var a=Object(l.a)({},n.drinks);return a[e].find((function(e,n,a){return e.id===t.id&&(a[n]=t,!0)})),a}),n.handleTouched)},n.handleAddNewItem=function(e,t,a){a.preventDefault(),t.id="".concat(n.state.drinks[e].length+1).concat(e).concat(t.name),n.setState((function(n){var a="".concat(n.drinks[e].length+1).concat(e).concat(t.name);t.id=a;var r=Object(l.a)({},n.drinks);return r[e].push(t),{drinks:r}}),n.handleTouched)},n.handleDeleteElement=function(e,t,a){a.preventDefault(),n.setState((function(n){var a=Object(l.a)({},n);return a.drinks[e].find((function(e,n,a){return e.id===t&&(a.splice(n,1),!0)})),a}),n.handleTouched)},n.handleSendChanges=function(e){e.preventDefault(),n.props.setDrinksMenu(n.state.drinks),n.setState({isChanged:!1}),n.props.fetchDrinksMenu()},n}return Object(j.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){return f.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.awrap(this.props.fetchDrinksMenu());case 2:this.setState((function(e,t){return Object(l.a)({},t.drinks,{isChanged:!1})}));case 3:case"end":return e.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state.drinks,n=t?Object.keys(t):[];return console.log(this.state),r.a.createElement("section",{className:"admin-menu"},n.map((function(n){return r.a.createElement("fieldset",{key:n},r.a.createElement("legend",null,n),t[n].map((function(t,a){return r.a.createElement(O,Object.assign({key:t.id},t,{handleFormSubmit:e.handleFormSubmit.bind(e,n,a),handleDeletElement:e.handleDeleteElement.bind(e,n),handleTouched:e.handleTouched}))})),r.a.createElement(z,{handleAddNewItem:e.handleAddNewItem.bind(e,n)}),r.a.createElement("button",{disabled:!e.state.isChanged,className:"send-menu-button",onClick:e.handleSendChanges},"Wy\u015blij"))})))}}]),t}(a.Component),y=Object(c.b)((function(e){return{drinks:e.admin.drinksMenu,isLoad:e.admin.isLoad}}),(function(e){return{fetchDrinksMenu:function(){return e(Object(i.p)())},setDrinksMenu:function(t){return e(Object(i.r)(t))}}}))(S),N=function(e){var t=e.filterWord,n=e.handleSearchBar;return r.a.createElement("fieldset",null,r.a.createElement("legend",null,"Wyszukiwanie"),r.a.createElement("input",{className:"search-bar",type:"text",value:t,onChange:n,placeholder:"Wyszukiwanie sk\u0142adnik\xf3w:"}))},w=function(e){function t(){var e,n;Object(b.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(E.a)(this,(e=Object(v.a)(t)).call.apply(e,[this].concat(r)))).state={filterWord:""},n.handleTouched=function(){n.setState({isChanged:!0})},n.handleFormSubmit=function(e,t,a){a.preventDefault(),n.setState((function(n){var a=Object(l.a)({},n.pizza);return a[e].find((function(e,n,a){return e.id===t.id&&(a[n]=t,!0)})),a}),n.handleTouched)},n.handleAddNewItem=function(e,t,a){a.preventDefault(),n.setState((function(n){var a="".concat(n.pizza[e].length+1).concat(e).concat(t.name);t.id=a;var r=Object(l.a)({},n.pizza);return r[e].push(t),r}),n.handleTouched)},n.handleDeleteElement=function(e,t,a){a.preventDefault(),n.setState((function(n){var a=Object(l.a)({},n.pizza);return a[e].find((function(e,n,a){return e.id===t&&(a.splice(n,1),!0)})),a}),n.handleTouched)},n.handleSendChanges=function(e){e.preventDefault();var t=n.props.match.url;n.props.setPizzaMenu(n.state.pizza,t),n.setState({isChanged:!1}),n.props.fetchMenu(t)},n.handleSearchBar=function(e){e.preventDefault(),n.setState({filterWord:e.target.value})},n}return Object(j.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e;return f.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.props.match.url,t.next=3,f.a.awrap(this.props.fetchMenu(e));case 3:this.setState((function(e,t){return Object(l.a)({pizza:Object(l.a)({},t.menu)},e)}));case 4:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state.pizza,n=t?Object.keys(t):[];return r.a.createElement("section",{className:"admin-menu"},r.a.createElement(N,{filterWord:this.state.filterWord,handleSearchBar:this.handleSearchBar}),n.map((function(n){return r.a.createElement("fieldset",{key:n},r.a.createElement("legend",null,n),t[n].filter((function(t){return t.ing.includes(e.state.filterWord)})).map((function(t,a){return r.a.createElement(O,Object.assign({key:t.id},t,{handleFormSubmit:e.handleFormSubmit.bind(e,n),handleDeletElement:e.handleDeleteElement.bind(e,n),handleTouched:e.handleTouched}))})),r.a.createElement(z,{handleAddNewItem:e.handleAddNewItem.bind(e,n)}),r.a.createElement("button",{disabled:!e.state.isChanged,className:"send-menu-button",onClick:e.handleSendChanges},"Wy\u015blij"))})))}}]),t}(a.Component),_=Object(c.b)((function(e){return{menu:e.admin.pizzaMenu}}),(function(e){return{fetchMenu:function(t){return e(Object(i.q)(t))},setPizzaMenu:function(t,n){return e(Object(i.s)(t,n))}}}))(w),C=function(){var e=Object(m.f)().url;return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"menu-navigation"},r.a.createElement(d.c,{className:"menu-navigation__button",to:"".concat(e,"/glutenfree")},"Gluten Free"),r.a.createElement(d.c,{className:"menu-navigation__button",to:"".concat(e,"/regular")},"Zwyk\u0142a pizza")),r.a.createElement(m.a,{path:"".concat(e,"/glutenfree"),component:_}),r.a.createElement(m.a,{path:"".concat(e,"/regular"),component:_}))},D=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(p,null),r.a.createElement(m.a,{path:"/admin-panel/pizza-menu",component:C}),r.a.createElement(m.a,{path:"/admin-panel/bar-menu",component:y}),r.a.createElement(m.a,{path:"/admin-panel/page-info",component:function(){return r.a.createElement("h1",{className:"message"},"this page is under development!")}}))};t.default=Object(c.b)((function(e){return{iuserID:e.admin.user}}))((function(e){var t=e.iuserID;return r.a.createElement("main",{className:"admin-panel"},window.innerWidth>767?r.a.createElement(r.a.Fragment,null,t.length?r.a.createElement(D,null):r.a.createElement(o,null)):r.a.createElement("h2",{className:"message"},"Minimalna zalecana szeroko\u015b\u0107 ekranu dla korzystania z paneli administratora ma wynosi\u0107 767 px! Prosz\u0119 wejd\u017a z laptopa,tabletu lub komputeru stacjonarnego ."))}))}}]);
//# sourceMappingURL=3.19582441.chunk.js.map